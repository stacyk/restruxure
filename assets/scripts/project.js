"use strict";

/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 *
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */

/*jshint browser: true, strict: true, undef: true */
(function (window) {

  'use strict';

  // class helper functions from bonzo https://github.com/ded/bonzo

  function classReg(className) {
    return new RegExp("(^|\\s+)" + className + "(\\s+|$)");
  }

  // classList support for class management
  // altho to be fair, the api sucks because it won't accept multiple classes at once
  var hasClass, addClass, removeClass;

  if ('classList' in document.documentElement) {
    hasClass = function hasClass(elem, c) {
      return elem.classList.contains(c);
    };
    addClass = function addClass(elem, c) {
      elem.classList.add(c);
    };
    removeClass = function removeClass(elem, c) {
      elem.classList.remove(c);
    };
  } else {
    hasClass = function hasClass(elem, c) {
      return classReg(c).test(elem.className);
    };
    addClass = function addClass(elem, c) {
      if (!hasClass(elem, c)) {
        elem.className = elem.className + ' ' + c;
      }
    };
    removeClass = function removeClass(elem, c) {
      elem.className = elem.className.replace(classReg(c), ' ');
    };
  }

  function toggleClass(elem, c) {
    var fn = hasClass(elem, c) ? removeClass : addClass;
    fn(elem, c);
  }

  window.classie = {
    // full names
    hasClass: hasClass,
    addClass: addClass,
    removeClass: removeClass,
    toggleClass: toggleClass,
    // short names
    has: hasClass,
    add: addClass,
    remove: removeClass,
    toggle: toggleClass
  };
})(window);
'use strict';

/**
 * File js-enabled.js
 *
 * If Javascript is enabled, replace the <body> class "no-js".
 */
document.body.className = document.body.className.replace('no-js', 'js');
'use strict';

/**
 * File modal.js
 *
 * Deal with multiple modals and their media.
 */
window.wdsModal = {};

(function (window, $, app) {

	var $modalToggle;
	var $focusableChildren;

	// Constructor.
	app.init = function () {
		app.cache();

		if (app.meetsRequirements()) {
			app.bindEvents();
		}
	};

	// Cache all the things.
	app.cache = function () {
		app.$c = {
			'body': $('body')
		};
	};

	// Do we meet the requirements?
	app.meetsRequirements = function () {
		return $('.modal-trigger').length;
	};

	// Combine all events.
	app.bindEvents = function () {
		// Trigger a modal to open.
		app.$c.body.on('click touchstart', '.modal-trigger', app.openModal);

		// Trigger the close button to close the modal.
		app.$c.body.on('click touchstart', '.close', app.closeModal);

		// Allow the user to close the modal by hitting the esc key.
		app.$c.body.on('keydown', app.escKeyClose);

		// Allow the user to close the modal by clicking outside of the modal.
		app.$c.body.on('click touchstart', 'div.modal-open', app.closeModalByClick);

		// Listen to tabs, trap keyboard if we need to
		app.$c.body.on('keydown', app.trapKeyboardMaybe);
	};

	// Open the modal.
	app.openModal = function () {
		// Store the modal toggle element
		$modalToggle = $(this);

		// Figure out which modal we're opening and store the object.
		var $modal = $($(this).data('target'));

		// Display the modal.
		$modal.addClass('modal-open');

		// Add body class.
		app.$c.body.addClass('modal-open');

		// Find the focusable children of the modal.
		// This list may be incomplete, really wish jQuery had the :focusable pseudo like jQuery UI does.
		// For more about :input see: https://api.jquery.com/input-selector/
		$focusableChildren = $modal.find('a, :input, [tabindex]');

		// Ideally, there is always one (the close button), but you never know.
		if ($focusableChildren.length > 0) {
			// Shift focus to the first focusable element.
			$focusableChildren[0].focus();
		}
	};

	// Close the modal.
	app.closeModal = function () {
		// Figure the opened modal we're closing and store the object.
		var $modal = $($('div.modal-open .close').data('target'));

		// Find the iframe in the $modal object.
		var $iframe = $modal.find('iframe');

		// Only do this if there are any iframes.
		if ($iframe.length) {
			// Get the iframe src URL.
			var url = $iframe.attr('src');

			// Removing/Readding the URL will effectively break the YouTube API.
			// So let's not do that when the iframe URL contains the enablejsapi parameter.
			if (!url.includes('enablejsapi=1')) {
				// Remove the source URL, then add it back, so the video can be played again later.
				$iframe.attr('src', '').attr('src', url);
			} else {
				// Use the YouTube API to stop the video.
				player.stopVideo();
			}
		}

		// Finally, hide the modal.
		$modal.removeClass('modal-open');

		// Remove the body class.
		app.$c.body.removeClass('modal-open');

		// Revert focus back to toggle element
		$modalToggle.focus();
	};

	// Close if "esc" key is pressed.
	app.escKeyClose = function (event) {
		if (27 === event.keyCode) {
			app.closeModal();
		}
	};

	// Close if the user clicks outside of the modal
	app.closeModalByClick = function (event) {
		// If the parent container is NOT the modal dialog container, close the modal
		if (!$(event.target).parents('div').hasClass('modal-dialog')) {
			app.closeModal();
		}
	};

	// Trap the keyboard into a modal when one is active.
	app.trapKeyboardMaybe = function (event) {

		// We only need to do stuff when the modal is open and tab is pressed.
		if (9 === event.which && $('.modal-open').length > 0) {
			var $focused = $(':focus');
			var focusIndex = $focusableChildren.index($focused);

			if (0 === focusIndex && event.shiftKey) {
				// If this is the first focusable element, and shift is held when pressing tab, go back to last focusable element.
				$focusableChildren[$focusableChildren.length - 1].focus();
				event.preventDefault();
			} else if (!event.shiftKey && focusIndex === $focusableChildren.length - 1) {
				// If this is the last focusable element, and shift is not held, go back to the first focusable element.
				$focusableChildren[0].focus();
				event.preventDefault();
			}
		}
	};

	// Engage!
	$(app.init);
})(window, jQuery, window.wdsModal);

// Load the yt iframe api js file from youtube.
// NOTE THE IFRAME URL MUST HAVE 'enablejsapi=1' appended to it.
// example: src="http://www.youtube.com/embed/M7lc1UVf-VE?enablejsapi=1"
// It also _must_ have an ID attribute.
var tag = document.createElement('script');
tag.id = 'iframe-yt';
tag.src = 'https://www.youtube.com/iframe_api';
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// This var and function have to be available globally due to yt js iframe api.
var player;
function onYouTubeIframeAPIReady() {
	var modal = jQuery('div.modal');
	var iframeid = modal.find('iframe').attr('id');

	player = new YT.Player(iframeid, {
		events: {
			'onReady': onPlayerReady,
			'onStateChange': onPlayerStateChange
		}
	});
}

function onPlayerReady(event) {}

function onPlayerStateChange(event) {
	// Set focus to the first focusable element inside of the modal the player is in.
	jQuery(event.target.a).parents('.modal').find('a, :input, [tabindex]').first().focus();
}
'use strict';

/**
 * File skip-link-focus-fix.js.
 *
 * Helps with accessibility for keyboard only users.
 *
 * Learn more: https://git.io/vWdr2
 */
(function () {
	var isWebkit = navigator.userAgent.toLowerCase().indexOf('webkit') > -1,
	    isOpera = navigator.userAgent.toLowerCase().indexOf('opera') > -1,
	    isIe = navigator.userAgent.toLowerCase().indexOf('msie') > -1;

	if ((isWebkit || isOpera || isIe) && document.getElementById && window.addEventListener) {
		window.addEventListener('hashchange', function () {
			var id = location.hash.substring(1),
			    element;

			if (!/^[A-z0-9_-]+$/.test(id)) {
				return;
			}

			element = document.getElementById(id);

			if (element) {
				if (!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)) {
					element.tabIndex = -1;
				}

				element.focus();
			}
		}, false);
	}
})();
'use strict';

/**
 * File sidebar.js
 *
 * Toggle Sidebar
 */

var sidebarRight = document.getElementById('sidebar-sliding-panel'),
    showRightPush = document.getElementById('sidebar-toggle-button'),
    body = document.body;

jQuery(document).ready(function ($) {
	/* Check width on page load*/
	if ($(window).width() > 1280) {
		classie.remove(body, 'sidebar-push-toleft');

		//	classie.add( sidebarRight, 'open' );
		//		classie.add( showRightPush, 'open');

		showRightPush.onclick = function () {
			classie.toggle(body, 'sidebar-push-toleft');
			classie.toggle(sidebarRight, 'open');
			classie.toggle(showRightPush, 'open');
		};
	} else {
		classie.remove(body, 'sidebar-push-toleft');

		showRightPush.onclick = function () {
			classie.toggle(body, 'sidebar-push-toleft');
			classie.toggle(sidebarRight, 'open');
			classie.toggle(showRightPush, 'open');
		};
	}
});
'use strict';

/**
 * File window-ready.js
 *
 * Add a "ready" class to <body> when window is ready.
 */
window.wdsWindowReady = {};
(function (window, $, app) {
	// Constructor.
	app.init = function () {
		app.cache();
		app.bindEvents();
	};

	// Cache document elements.
	app.cache = function () {
		app.$c = {
			'window': $(window),
			'body': $(document.body)
		};
	};

	// Combine all events.
	app.bindEvents = function () {
		app.$c.window.load(app.addBodyClass);
	};

	// Add a class to <body>.
	app.addBodyClass = function () {
		app.$c.body.addClass('ready');
	};

	// Engage!
	$(app.init);
})(window, jQuery, window.wdsWindowReady);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzaWUuanMiLCJqcy1lbmFibGVkLmpzIiwibW9kYWwuanMiLCJza2lwLWxpbmstZm9jdXMtZml4LmpzIiwidG9nZ2xlLmpzIiwid2luZG93LXJlYWR5LmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImNsYXNzUmVnIiwiY2xhc3NOYW1lIiwiUmVnRXhwIiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlbGVtIiwiYyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwicmVtb3ZlIiwidGVzdCIsInJlcGxhY2UiLCJ0b2dnbGVDbGFzcyIsImZuIiwiY2xhc3NpZSIsImhhcyIsInRvZ2dsZSIsImJvZHkiLCJ3ZHNNb2RhbCIsIiQiLCJhcHAiLCIkbW9kYWxUb2dnbGUiLCIkZm9jdXNhYmxlQ2hpbGRyZW4iLCJpbml0IiwiY2FjaGUiLCJtZWV0c1JlcXVpcmVtZW50cyIsImJpbmRFdmVudHMiLCIkYyIsImxlbmd0aCIsIm9uIiwib3Blbk1vZGFsIiwiY2xvc2VNb2RhbCIsImVzY0tleUNsb3NlIiwiY2xvc2VNb2RhbEJ5Q2xpY2siLCJ0cmFwS2V5Ym9hcmRNYXliZSIsIiRtb2RhbCIsImRhdGEiLCJmaW5kIiwiZm9jdXMiLCIkaWZyYW1lIiwidXJsIiwiYXR0ciIsImluY2x1ZGVzIiwicGxheWVyIiwic3RvcFZpZGVvIiwiZXZlbnQiLCJrZXlDb2RlIiwidGFyZ2V0IiwicGFyZW50cyIsIndoaWNoIiwiJGZvY3VzZWQiLCJmb2N1c0luZGV4IiwiaW5kZXgiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwialF1ZXJ5IiwidGFnIiwiY3JlYXRlRWxlbWVudCIsImlkIiwic3JjIiwiZmlyc3RTY3JpcHRUYWciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJvbllvdVR1YmVJZnJhbWVBUElSZWFkeSIsIm1vZGFsIiwiaWZyYW1laWQiLCJZVCIsIlBsYXllciIsImV2ZW50cyIsIm9uUGxheWVyUmVhZHkiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwiYSIsImZpcnN0IiwiaXNXZWJraXQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJpc09wZXJhIiwiaXNJZSIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsInN1YnN0cmluZyIsImVsZW1lbnQiLCJ0YWdOYW1lIiwidGFiSW5kZXgiLCJzaWRlYmFyUmlnaHQiLCJzaG93UmlnaHRQdXNoIiwicmVhZHkiLCJ3aWR0aCIsIm9uY2xpY2siLCJ3ZHNXaW5kb3dSZWFkeSIsImxvYWQiLCJhZGRCb2R5Q2xhc3MiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7Ozs7QUFVQTtBQUNBLENBQUUsVUFBVUEsTUFBVixFQUFtQjs7QUFFckI7O0FBRUE7O0FBRUEsV0FBU0MsUUFBVCxDQUFtQkMsU0FBbkIsRUFBK0I7QUFDN0IsV0FBTyxJQUFJQyxNQUFKLENBQVcsYUFBYUQsU0FBYixHQUF5QixVQUFwQyxDQUFQO0FBQ0Q7O0FBRUQ7QUFDQTtBQUNBLE1BQUlFLFFBQUosRUFBY0MsUUFBZCxFQUF3QkMsV0FBeEI7O0FBRUEsTUFBSyxlQUFlQyxTQUFTQyxlQUE3QixFQUErQztBQUM3Q0osZUFBVyxrQkFBVUssSUFBVixFQUFnQkMsQ0FBaEIsRUFBb0I7QUFDN0IsYUFBT0QsS0FBS0UsU0FBTCxDQUFlQyxRQUFmLENBQXlCRixDQUF6QixDQUFQO0FBQ0QsS0FGRDtBQUdBTCxlQUFXLGtCQUFVSSxJQUFWLEVBQWdCQyxDQUFoQixFQUFvQjtBQUM3QkQsV0FBS0UsU0FBTCxDQUFlRSxHQUFmLENBQW9CSCxDQUFwQjtBQUNELEtBRkQ7QUFHQUosa0JBQWMscUJBQVVHLElBQVYsRUFBZ0JDLENBQWhCLEVBQW9CO0FBQ2hDRCxXQUFLRSxTQUFMLENBQWVHLE1BQWYsQ0FBdUJKLENBQXZCO0FBQ0QsS0FGRDtBQUdELEdB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ZCxDQUFvQjNFLElBQUk0RSxZQUF4QjtBQUNBLEVBRkQ7O0FBSUE7QUFDQTVFLEtBQUk0RSxZQUFKLEdBQW1CLFlBQVk7QUFDOUI1RSxNQUFJTyxFQUFKLENBQU9WLElBQVAsQ0FBWWpCLFFBQVosQ0FBc0IsT0FBdEI7QUFDQSxFQUZEOztBQUlBO0FBQ0FtQixHQUFHQyxJQUFJRyxJQUFQO0FBQ0EsQ0EzQkQsRUEyQks1QixNQTNCTCxFQTJCYTRELE1BM0JiLEVBMkJxQjVELE9BQU9tRyxjQTNCNUIiLCJmaWxlIjoicHJvamVjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogY2xhc3NpZSAtIGNsYXNzIGhlbHBlciBmdW5jdGlvbnNcbiAqIGZyb20gYm9uem8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9ib256b1xuICpcbiAqIGNsYXNzaWUuaGFzKCBlbGVtLCAnbXktY2xhc3MnICkgLT4gdHJ1ZS9mYWxzZVxuICogY2xhc3NpZS5hZGQoIGVsZW0sICdteS1uZXctY2xhc3MnIClcbiAqIGNsYXNzaWUucmVtb3ZlKCBlbGVtLCAnbXktdW53YW50ZWQtY2xhc3MnIClcbiAqIGNsYXNzaWUudG9nZ2xlKCBlbGVtLCAnbXktY2xhc3MnIClcbiAqL1xuXG4vKmpzaGludCBicm93c2VyOiB0cnVlLCBzdHJpY3Q6IHRydWUsIHVuZGVmOiB0cnVlICovXG4oIGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuLy8gY2xhc3MgaGVscGVyIGZ1bmN0aW9ucyBmcm9tIGJvbnpvIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvYm9uem9cblxuZnVuY3Rpb24gY2xhc3NSZWcoIGNsYXNzTmFtZSApIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoXnxcXFxccyspXCIgKyBjbGFzc05hbWUgKyBcIihcXFxccyt8JClcIik7XG59XG5cbi8vIGNsYXNzTGlzdCBzdXBwb3J0IGZvciBjbGFzcyBtYW5hZ2VtZW50XG4vLyBhbHRobyB0byBiZSBmYWlyLCB0aGUgYXBpIHN1Y2tzIGJlY2F1c2UgaXQgd29uJ3QgYWNjZXB0IG11bHRpcGxlIGNsYXNzZXMgYXQgb25jZVxudmFyIGhhc0NsYXNzLCBhZGRDbGFzcywgcmVtb3ZlQ2xhc3M7XG5cbmlmICggJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICkge1xuICBoYXNDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xuICAgIHJldHVybiBlbGVtLmNsYXNzTGlzdC5jb250YWlucyggYyApO1xuICB9O1xuICBhZGRDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xuICAgIGVsZW0uY2xhc3NMaXN0LmFkZCggYyApO1xuICB9O1xuICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSggYyApO1xuICB9O1xufVxuZWxzZSB7XG4gIGhhc0NsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XG4gICAgcmV0dXJuIGNsYXNzUmVnKCBjICkudGVzdCggZWxlbS5jbGFzc05hbWUgKTtcbiAgfTtcbiAgYWRkQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICBpZiAoICFoYXNDbGFzcyggZWxlbSwgYyApICkge1xuICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZSArICcgJyArIGM7XG4gICAgfVxuICB9O1xuICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xuICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUucmVwbGFjZSggY2xhc3NSZWcoIGMgKSwgJyAnICk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKCBlbGVtLCBjICkge1xuICB2YXIgZm4gPSBoYXNDbGFzcyggZWxlbSwgYyApID8gcmVtb3ZlQ2xhc3MgOiBhZGRDbGFzcztcbiAgZm4oIGVsZW0sIGMgKTtcbn1cblxud2luZG93LmNsYXNzaWUgPSB7XG4gIC8vIGZ1bGwgbmFtZXNcbiAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxuICBhZGRDbGFzczogYWRkQ2xhc3MsXG4gIHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcbiAgdG9nZ2xlQ2xhc3M6IHRvZ2dsZUNsYXNzLFxuICAvLyBzaG9ydCBuYW1lc1xuICBoYXM6IGhhc0NsYXNzLFxuICBhZGQ6IGFkZENsYXNzLFxuICByZW1vdmU6IHJlbW92ZUNsYXNzLFxuICB0b2dnbGU6IHRvZ2dsZUNsYXNzXG59O1xuXG59KSggd2luZG93ICk7XG4iLCIvKipcbiAqIEZpbGUganMtZW5hYmxlZC5qc1xuICpcbiAqIElmIEphdmFzY3JpcHQgaXMgZW5hYmxlZCwgcmVwbGFjZSB0aGUgPGJvZHk+IGNsYXNzIFwibm8tanNcIi5cbiAqL1xuZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZS5yZXBsYWNlKCAnbm8tanMnLCAnanMnICk7XG4iLCIvKipcbiAqIEZpbGUgbW9kYWwuanNcbiAqXG4gKiBEZWFsIHdpdGggbXVsdGlwbGUgbW9kYWxzIGFuZCB0aGVpciBtZWRpYS5cbiAqL1xud2luZG93Lndkc01vZGFsID0ge307XG5cbiggZnVuY3Rpb24gKCB3aW5kb3csICQsIGFwcCApIHtcblxuXHR2YXIgJG1vZGFsVG9nZ2xlO1xuXHR2YXIgJGZvY3VzYWJsZUNoaWxkcmVuO1xuXG5cdC8vIENvbnN0cnVjdG9yLlxuXHRhcHAuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRhcHAuY2FjaGUoKTtcblxuXHRcdGlmICggYXBwLm1lZXRzUmVxdWlyZW1lbnRzKCkgKSB7XG5cdFx0XHRhcHAuYmluZEV2ZW50cygpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBDYWNoZSBhbGwgdGhlIHRoaW5ncy5cblx0YXBwLmNhY2hlID0gZnVuY3Rpb24gKCkge1xuXHRcdGFwcC4kYyA9IHtcblx0XHRcdCdib2R5JzogJCggJ2JvZHknIClcblx0XHR9O1xuXHR9O1xuXG5cdC8vIERvIHdlIG1lZXQgdGhlIHJlcXVpcmVtZW50cz9cblx0YXBwLm1lZXRzUmVxdWlyZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiAkKCAnLm1vZGFsLXRyaWdnZXInICkubGVuZ3RoO1xuXHR9O1xuXG5cdC8vIENvbWJpbmUgYWxsIGV2ZW50cy5cblx0YXBwLmJpbmRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gVHJpZ2dlciBhIG1vZGFsIHRvIG9wZW4uXG5cdFx0YXBwLiRjLmJvZHkub24oICdjbGljayB0b3VjaHN0YXJ0JywgJy5tb2RhbC10cmlnZ2VyJywgYXBwLm9wZW5Nb2RhbCApO1xuXG5cdFx0Ly8gVHJpZ2dlciB0aGUgY2xvc2UgYnV0dG9uIHRvIGNsb3NlIHRoZSBtb2RhbC5cblx0XHRhcHAuJGMuYm9keS5vbiggJ2NsaWNrIHRvdWNoc3RhcnQnLCAnLmNsb3NlJywgYXBwLmNsb3NlTW9kYWwgKTtcblxuXHRcdC8vIEFsbG93IHRoZSB1c2VyIHRvIGNsb3NlIHRoZSBtb2RhbCBieSBoaXR0aW5nIHRoZSBlc2Mga2V5LlxuXHRcdGFwcC4kYy5ib2R5Lm9uKCAna2V5ZG93bicsIGFwcC5lc2NLZXlDbG9zZSApO1xuXG5cdFx0Ly8gQWxsb3cgdGhlIHVzZXIgdG8gY2xvc2UgdGhlIG1vZGFsIGJ5IGNsaWNraW5nIG91dHNpZGUgb2YgdGhlIG1vZGFsLlxuXHRcdGFwcC4kYy5ib2R5Lm9uKCAnY2xpY2sgdG91Y2hzdGFydCcsICdkaXYubW9kYWwtb3BlbicsIGFwcC5jbG9zZU1vZGFsQnlDbGljayApO1xuXG5cdFx0Ly8gTGlzdGVuIHRvIHRhYnMsIHRyYXAga2V5Ym9hcmQgaWYgd2UgbmVlZCB0b1xuXHRcdGFwcC4kYy5ib2R5Lm9uKCAna2V5ZG93bicsIGFwcC50cmFwS2V5Ym9hcmRNYXliZSApO1xuXG5cdH07XG5cblx0Ly8gT3BlbiB0aGUgbW9kYWwuXG5cdGFwcC5vcGVuTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gU3RvcmUgdGhlIG1vZGFsIHRvZ2dsZSBlbGVtZW50XG5cdFx0JG1vZGFsVG9nZ2xlID0gJCggdGhpcyApO1xuXG5cdFx0Ly8gRmlndXJlIG91dCB3aGljaCBtb2RhbCB3ZSdyZSBvcGVuaW5nIGFuZCBzdG9yZSB0aGUgb2JqZWN0LlxuXHRcdHZhciAkbW9kYWwgPSAkKCAkKCB0aGlzICkuZGF0YSggJ3RhcmdldCcgKSApO1xuXG5cdFx0Ly8gRGlzcGxheSB0aGUgbW9kYWwuXG5cdFx0JG1vZGFsLmFkZENsYXNzKCAnbW9kYWwtb3BlbicgKTtcblxuXHRcdC8vIEFkZCBib2R5IGNsYXNzLlxuXHRcdGFwcC4kYy5ib2R5LmFkZENsYXNzKCAnbW9kYWwtb3BlbicgKTtcblxuXHRcdC8vIEZpbmQgdGhlIGZvY3VzYWJsZSBjaGlsZHJlbiBvZiB0aGUgbW9kYWwuXG5cdFx0Ly8gVGhpcyBsaXN0IG1heSBiZSBpbmNvbXBsZXRlLCByZWFsbHkgd2lzaCBqUXVlcnkgaGFkIHRoZSA6Zm9jdXNhYmxlIHBzZXVkbyBsaWtlIGpRdWVyeSBVSSBkb2VzLlxuXHRcdC8vIEZvciBtb3JlIGFib3V0IDppbnB1dCBzZWU6IGh0dHBzOi8vYXBpLmpxdWVyeS5jb20vaW5wdXQtc2VsZWN0b3IvXG5cdFx0JGZvY3VzYWJsZUNoaWxkcmVuID0gJG1vZGFsLmZpbmQoJ2EsIDppbnB1dCwgW3RhYmluZGV4XScpO1xuXG5cdFx0Ly8gSWRlYWxseSwgdGhlcmUgaXMgYWx3YXlzIG9uZSAodGhlIGNsb3NlIGJ1dHRvbiksIGJ1dCB5b3UgbmV2ZXIga25vdy5cblx0XHRpZiAoICRmb2N1c2FibGVDaGlsZHJlbi5sZW5ndGggPiAwICkge1xuXHRcdFx0Ly8gU2hpZnQgZm9jdXMgdG8gdGhlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50LlxuXHRcdFx0JGZvY3VzYWJsZUNoaWxkcmVuWzBdLmZvY3VzKCk7XG5cdFx0fVxuXG5cdH07XG5cblx0Ly8gQ2xvc2UgdGhlIG1vZGFsLlxuXHRhcHAuY2xvc2VNb2RhbCA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBGaWd1cmUgdGhlIG9wZW5lZCBtb2RhbCB3ZSdyZSBjbG9zaW5nIGFuZCBzdG9yZSB0aGUgb2JqZWN0LlxuXHRcdHZhciAkbW9kYWwgPSAkKCAkKCAnZGl2Lm1vZGFsLW9wZW4gLmNsb3NlJyApLmRhdGEoICd0YXJnZXQnICkgKTtcblxuXHRcdC8vIEZpbmQgdGhlIGlmcmFtZSBpbiB0aGUgJG1vZGFsIG9iamVjdC5cblx0XHR2YXIgJGlmcmFtZSA9ICRtb2RhbC5maW5kKCAnaWZyYW1lJyApO1xuXG5cdFx0Ly8gT25seSBkbyB0aGlzIGlmIHRoZXJlIGFyZSBhbnkgaWZyYW1lcy5cblx0XHRpZiAoICRpZnJhbWUubGVuZ3RoICkge1xuXHRcdFx0Ly8gR2V0IHRoZSBpZnJhbWUgc3JjIFVSTC5cblx0XHRcdHZhciB1cmwgPSAkaWZyYW1lLmF0dHIoICdzcmMnICk7XG5cblx0XHRcdC8vIFJlbW92aW5nL1JlYWRkaW5nIHRoZSBVUkwgd2lsbCBlZmZlY3RpdmVseSBicmVhayB0aGUgWW91VHViZSBBUEkuXG5cdFx0XHQvLyBTbyBsZXQncyBub3QgZG8gdGhhdCB3aGVuIHRoZSBpZnJhbWUgVVJMIGNvbnRhaW5zIHRoZSBlbmFibGVqc2FwaSBwYXJhbWV0ZXIuXG5cdFx0XHRpZiAoICEgdXJsLmluY2x1ZGVzKCAnZW5hYmxlanNhcGk9MScgKSApIHtcblx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBzb3VyY2UgVVJMLCB0aGVuIGFkZCBpdCBiYWNrLCBzbyB0aGUgdmlkZW8gY2FuIGJlIHBsYXllZCBhZ2FpbiBsYXRlci5cblx0XHRcdFx0JGlmcmFtZS5hdHRyKCAnc3JjJywgJycgKS5hdHRyKCAnc3JjJywgdXJsICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBVc2UgdGhlIFlvdVR1YmUgQVBJIHRvIHN0b3AgdGhlIHZpZGVvLlxuXHRcdFx0XHRwbGF5ZXIuc3RvcFZpZGVvKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmluYWxseSwgaGlkZSB0aGUgbW9kYWwuXG5cdFx0JG1vZGFsLnJlbW92ZUNsYXNzKCAnbW9kYWwtb3BlbicgKTtcblxuXHRcdC8vIFJlbW92ZSB0aGUgYm9keSBjbGFzcy5cblx0XHRhcHAuJGMuYm9keS5yZW1vdmVDbGFzcyggJ21vZGFsLW9wZW4nICk7XG5cblx0XHQvLyBSZXZlcnQgZm9jdXMgYmFjayB0byB0b2dnbGUgZWxlbWVudFxuXHRcdCRtb2RhbFRvZ2dsZS5mb2N1cygpO1xuXG5cdH07XG5cblx0Ly8gQ2xvc2UgaWYgXCJlc2NcIiBrZXkgaXMgcHJlc3NlZC5cblx0YXBwLmVzY0tleUNsb3NlID0gZnVuY3Rpb24gKCBldmVudCApIHtcblx0XHRpZiAoIDI3ID09PSBldmVudC5rZXlDb2RlICkge1xuXHRcdFx0YXBwLmNsb3NlTW9kYWwoKTtcblx0XHR9XG5cdH07XG5cblx0Ly8gQ2xvc2UgaWYgdGhlIHVzZXIgY2xpY2tzIG91dHNpZGUgb2YgdGhlIG1vZGFsXG5cdGFwcC5jbG9zZU1vZGFsQnlDbGljayA9IGZ1bmN0aW9uICggZXZlbnQgKSB7XG5cdFx0Ly8gSWYgdGhlIHBhcmVudCBjb250YWluZXIgaXMgTk9UIHRoZSBtb2RhbCBkaWFsb2cgY29udGFpbmVyLCBjbG9zZSB0aGUgbW9kYWxcblx0XHRpZiAoICEkKCBldmVudC50YXJnZXQgKS5wYXJlbnRzKCAnZGl2JyApLmhhc0NsYXNzKCAnbW9kYWwtZGlhbG9nJyApICkge1xuXHRcdFx0YXBwLmNsb3NlTW9kYWwoKTtcblx0XHR9XG5cdH07XG5cblx0Ly8gVHJhcCB0aGUga2V5Ym9hcmQgaW50byBhIG1vZGFsIHdoZW4gb25lIGlzIGFjdGl2ZS5cblx0YXBwLnRyYXBLZXlib2FyZE1heWJlID0gZnVuY3Rpb24gKCBldmVudCApIHtcblxuXHRcdC8vIFdlIG9ubHkgbmVlZCB0byBkbyBzdHVmZiB3aGVuIHRoZSBtb2RhbCBpcyBvcGVuIGFuZCB0YWIgaXMgcHJlc3NlZC5cblx0XHRpZiAoIDkgPT09IGV2ZW50LndoaWNoICYmICQoICcubW9kYWwtb3BlbicgKS5sZW5ndGggPiAwICkge1xuXHRcdFx0dmFyICRmb2N1c2VkID0gJCggJzpmb2N1cycgKTtcblx0XHRcdHZhciBmb2N1c0luZGV4ID0gJGZvY3VzYWJsZUNoaWxkcmVuLmluZGV4KCAkZm9jdXNlZCApO1xuXG5cdFx0XHRpZiAoIDAgPT09IGZvY3VzSW5kZXggJiYgZXZlbnQuc2hpZnRLZXkgKSB7XG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50LCBhbmQgc2hpZnQgaXMgaGVsZCB3aGVuIHByZXNzaW5nIHRhYiwgZ28gYmFjayB0byBsYXN0IGZvY3VzYWJsZSBlbGVtZW50LlxuXHRcdFx0XHQkZm9jdXNhYmxlQ2hpbGRyZW5bICRmb2N1c2FibGVDaGlsZHJlbi5sZW5ndGggLSAxIF0uZm9jdXMoKTtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH0gZWxzZSBpZiAoICEgZXZlbnQuc2hpZnRLZXkgJiYgZm9jdXNJbmRleCA9PT0gJGZvY3VzYWJsZUNoaWxkcmVuLmxlbmd0aCAtIDEgKSB7XG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgZm9jdXNhYmxlIGVsZW1lbnQsIGFuZCBzaGlmdCBpcyBub3QgaGVsZCwgZ28gYmFjayB0byB0aGUgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnQuXG5cdFx0XHRcdCRmb2N1c2FibGVDaGlsZHJlblswXS5mb2N1cygpO1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEVuZ2FnZSFcblx0JCggYXBwLmluaXQgKTtcbn0gKSggd2luZG93LCBqUXVlcnksIHdpbmRvdy53ZHNNb2RhbCApO1xuXG4vLyBMb2FkIHRoZSB5dCBpZnJhbWUgYXBpIGpzIGZpbGUgZnJvbSB5b3V0dWJlLlxuLy8gTk9URSBUSEUgSUZSQU1FIFVSTCBNVVNUIEhBVkUgJ2VuYWJsZWpzYXBpPTEnIGFwcGVuZGVkIHRvIGl0LlxuLy8gZXhhbXBsZTogc3JjPVwiaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9NN2xjMVVWZi1WRT9lbmFibGVqc2FwaT0xXCJcbi8vIEl0IGFsc28gX211c3RfIGhhdmUgYW4gSUQgYXR0cmlidXRlLlxudmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xudGFnLmlkID0gJ2lmcmFtZS15dCc7XG50YWcuc3JjID0gJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2lmcmFtZV9hcGknO1xudmFyIGZpcnN0U2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFnLCBmaXJzdFNjcmlwdFRhZyk7XG5cbi8vIFRoaXMgdmFyIGFuZCBmdW5jdGlvbiBoYXZlIHRvIGJlIGF2YWlsYWJsZSBnbG9iYWxseSBkdWUgdG8geXQganMgaWZyYW1lIGFwaS5cbnZhciBwbGF5ZXI7XG5mdW5jdGlvbiBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpIHtcbiAgdmFyIG1vZGFsID0galF1ZXJ5KCdkaXYubW9kYWwnKTtcblx0dmFyIGlmcmFtZWlkID0gbW9kYWwuZmluZCgnaWZyYW1lJykuYXR0cignaWQnKTtcblxuXHRwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCBpZnJhbWVpZCAsIHtcblx0XHRldmVudHM6IHtcblx0XHRcdCdvblJlYWR5Jzogb25QbGF5ZXJSZWFkeSxcblx0XHRcdCdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG9uUGxheWVyUmVhZHkoZXZlbnQpIHtcblxufVxuXG5mdW5jdGlvbiBvblBsYXllclN0YXRlQ2hhbmdlKCBldmVudCApIHtcblx0Ly8gU2V0IGZvY3VzIHRvIHRoZSBmaXJzdCBmb2N1c2FibGUgZWxlbWVudCBpbnNpZGUgb2YgdGhlIG1vZGFsIHRoZSBwbGF5ZXIgaXMgaW4uXG5cdGpRdWVyeSggZXZlbnQudGFyZ2V0LmEgKS5wYXJlbnRzKCAnLm1vZGFsJyApLmZpbmQoJ2EsIDppbnB1dCwgW3RhYmluZGV4XScpLmZpcnN0KCkuZm9jdXMoKTtcbn1cbiIsIi8qKlxuICogRmlsZSBza2lwLWxpbmstZm9jdXMtZml4LmpzLlxuICpcbiAqIEhlbHBzIHdpdGggYWNjZXNzaWJpbGl0eSBmb3Iga2V5Ym9hcmQgb25seSB1c2Vycy5cbiAqXG4gKiBMZWFybiBtb3JlOiBodHRwczovL2dpdC5pby92V2RyMlxuICovXG4oIGZ1bmN0aW9uICgpIHtcblx0dmFyIGlzV2Via2l0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoICd3ZWJraXQnICkgPiAtMSxcblx0XHRpc09wZXJhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoICdvcGVyYScgKSA+IC0xLFxuXHRcdGlzSWUgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggJ21zaWUnICkgPiAtMTtcblxuXHRpZiAoICggaXNXZWJraXQgfHwgaXNPcGVyYSB8fCBpc0llICkgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGlkID0gbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoIDEgKSxcblx0XHRcdFx0ZWxlbWVudDtcblxuXHRcdFx0aWYgKCAhKCAvXltBLXowLTlfLV0rJC8gKS50ZXN0KCBpZCApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblxuXHRcdFx0aWYgKCBlbGVtZW50ICkge1xuXHRcdFx0XHRpZiAoICEoIC9eKD86YXxzZWxlY3R8aW5wdXR8YnV0dG9ufHRleHRhcmVhKSQvaSApLnRlc3QoIGVsZW1lbnQudGFnTmFtZSApICkge1xuXHRcdFx0XHRcdGVsZW1lbnQudGFiSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGVsZW1lbnQuZm9jdXMoKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSApO1xuXHR9XG59ICkoKTtcbiIsIi8qKlxuICogRmlsZSBzaWRlYmFyLmpzXG4gKlxuICogVG9nZ2xlIFNpZGViYXJcbiAqL1xuXG52YXIgc2lkZWJhclJpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdzaWRlYmFyLXNsaWRpbmctcGFuZWwnICksXG5cdHNob3dSaWdodFB1c2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3NpZGViYXItdG9nZ2xlLWJ1dHRvbicgKSxcblx0Ym9keSA9IGRvY3VtZW50LmJvZHk7XG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuICAvKiBDaGVjayB3aWR0aCBvbiBwYWdlIGxvYWQqL1xuICBpZiAoICQod2luZG93KS53aWR0aCgpID4gMTI4MCkge1xuXHRcdGNsYXNzaWUucmVtb3ZlKCBib2R5LCAnc2lkZWJhci1wdXNoLXRvbGVmdCcgKTtcblxuXHQvL1x0Y2xhc3NpZS5hZGQoIHNpZGViYXJSaWdodCwgJ29wZW4nICk7XG4vL1x0XHRjbGFzc2llLmFkZCggc2hvd1JpZ2h0UHVzaCwgJ29wZW4nKTtcblxuXHRcdHNob3dSaWdodFB1c2gub25jbGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2xhc3NpZS50b2dnbGUoIGJvZHksICdzaWRlYmFyLXB1c2gtdG9sZWZ0JyApO1xuXHRcdFx0Y2xhc3NpZS50b2dnbGUoIHNpZGViYXJSaWdodCwgJ29wZW4nICk7XG5cdFx0XHRjbGFzc2llLnRvZ2dsZSggc2hvd1JpZ2h0UHVzaCwgJ29wZW4nKTtcdFx0fVxuXHR9XG5cblx0ZWxzZSB7XG5cdFx0Y2xhc3NpZS5yZW1vdmUoIGJvZHksICdzaWRlYmFyLXB1c2gtdG9sZWZ0JyApO1xuXG5cdFx0c2hvd1JpZ2h0UHVzaC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRjbGFzc2llLnRvZ2dsZSggYm9keSwgJ3NpZGViYXItcHVzaC10b2xlZnQnICk7XG5cdFx0XHRjbGFzc2llLnRvZ2dsZSggc2lkZWJhclJpZ2h0LCAnb3BlbicgKTtcblx0XHRcdGNsYXNzaWUudG9nZ2xlKCBzaG93UmlnaHRQdXNoLCAnb3BlbicpO1xuXHRcdH1cbiAgfVxufSk7XG4iLCIvKipcbiAqIEZpbGUgd2luZG93LXJlYWR5LmpzXG4gKlxuICogQWRkIGEgXCJyZWFkeVwiIGNsYXNzIHRvIDxib2R5PiB3aGVuIHdpbmRvdyBpcyByZWFkeS5cbiAqL1xud2luZG93Lndkc1dpbmRvd1JlYWR5ID0ge307XG4oIGZ1bmN0aW9uICggd2luZG93LCAkLCBhcHAgKSB7XG5cdC8vIENvbnN0cnVjdG9yLlxuXHRhcHAuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRhcHAuY2FjaGUoKTtcblx0XHRhcHAuYmluZEV2ZW50cygpO1xuXHR9O1xuXG5cdC8vIENhY2hlIGRvY3VtZW50IGVsZW1lbnRzLlxuXHRhcHAuY2FjaGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0YXBwLiRjID0ge1xuXHRcdFx0J3dpbmRvdyc6ICQoIHdpbmRvdyApLFxuXHRcdFx0J2JvZHknOiAkKCBkb2N1bWVudC5ib2R5IClcblx0XHR9O1xuXHR9O1xuXG5cdC8vIENvbWJpbmUgYWxsIGV2ZW50cy5cblx0YXBwLmJpbmRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0YXBwLiRjLndpbmRvdy5sb2FkKCBhcHAuYWRkQm9keUNsYXNzICk7XG5cdH07XG5cblx0Ly8gQWRkIGEgY2xhc3MgdG8gPGJvZHk+LlxuXHRhcHAuYWRkQm9keUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdGFwcC4kYy5ib2R5LmFkZENsYXNzKCAncmVhZHknICk7XG5cdH07XG5cblx0Ly8gRW5nYWdlIVxuXHQkKCBhcHAuaW5pdCApO1xufSApKCB3aW5kb3csIGpRdWVyeSwgd2luZG93Lndkc1dpbmRvd1JlYWR5ICk7XG4iXX0=
